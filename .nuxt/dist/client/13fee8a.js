(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{577:function(t,e,r){"use strict";r.r(e);r(40),r(13),r(12),r(11),r(15),r(16);var n=r(23),o=r(2),c=(r(55),r(84));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={middleware:"auth",data:function(){return{orders:[],ratings:[]}},computed:l(l({},Object(c.b)(["isAuthenticated","loggedInUser"])),Object(c.c)({favorites:function(t){return t.favorite.favorite}})),mounted:function(){this.fetchOrders(),this.fetchRatings()},methods:{reOrder:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={name:t.name,phone:t.phone,email:t.email,location:t.location,instructions:t.instructions,total:t.total,products:t.products,paymentOption:t.paymentOption,pending:!0,rejected:!1,handled:!1,approved:!1,confirmed:!1,amountPaid:0,paid:!1,scheduled:!1,shipped:!1,discountApplied:0,orderCategory:"Home delivery",medium:"site",deliveryDate:""},r.next=3,e.$http.$post("place-order",JSON.stringify(n),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(r){console.log(r),e.$bvModal.hide("wp-".concat(t._id)),e.$toast.success("Order successful!")})).catch((function(t){console.log(t)}));case 3:case"end":return r.stop()}}),r)})))()},fetchOrders:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.$get("my-orders",{headers:{Authorization:t.$auth.getToken("local"),"Content-Type":"application/json"}}).then((function(e){return t.orders=e.result}));case 2:case"end":return e.stop()}}),e)})))()},fetchRatings:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.$get("ratings/my-reviews",{headers:{Authorization:t.$auth.getToken("local"),"Content-Type":"application/json"}}).then((function(e){return t.ratings=e.result}));case 2:case"end":return e.stop()}}),e)})))()}},head:function(){var t="Liquor Spring – the swiftest way to order alcohol online in Nairobi. Call 0705646186. Enjoy free drinks delivery in 20 mins at affordable prices",e="Liquor Spring – Free alcohol delivery services at best prices";return{title:e,meta:[{hid:"description",name:"description",content:t},{hid:"og:title",name:"og:title",content:e},{hid:"og:description",name:"og:description",content:t},{hid:"og:type",name:"og:type",content:"website"}]}}},h=r(57),component=Object(h.a)(v,(function(){var t=this,e=t._self._c;return e("div",[e("section",{staticClass:"py-5"},[e("div",{staticClass:"container py-5"},[t._m(0),t._v(" "),e("h5",{staticClass:"text-success"},[e("strong",[t._v("Welcome "+t._s(t.loggedInUser.name||"auth user not found")+" ")])]),t._v(" "),e("div",{staticClass:"card justify-content-center my-3 rounded-0 p-4 shadow",staticStyle:{"border-left":"3px solid #EC2326"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("a",{staticClass:"text-decoration-none",attrs:{href:"#"}},[e("div",{staticClass:"card text-white text-center mb-3",staticStyle:{"max-width":"18rem"}},[t._m(1),t._v(" "),e("div",{staticClass:"card-body"},[e("h2",{staticClass:"card-title text-dark font-weight-bold"},[t._v(t._s(t.orders.length||0))])])])])]),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("nuxt-link",{staticClass:"text-decoration-none",attrs:{to:"/account/ratings/"}},[e("div",{staticClass:"card text-white text-center mb-3 clearfix",staticStyle:{"max-width":"18rem"}},[e("div",{staticClass:"card-header bg-success"},[e("i",{staticClass:"fas fa-star fa-fw"}),t._v(" Total reviews")]),t._v(" "),e("div",{staticClass:"card-body"},[e("h2",{staticClass:"card-title text-dark font-weight-bold"},[t._v(t._s(t.ratings.length||0))])])])])],1),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("nuxt-link",{staticClass:"text-decoration-none",attrs:{to:"/favorite"}},[e("div",{staticClass:"card text-white text-center mb-3 clearfix",staticStyle:{"max-width":"18rem"}},[e("div",{staticClass:"card-header bg-warning"},[e("i",{staticClass:"fas fa-heart fa-fw"}),t._v(" Total Wishlist items")]),t._v(" "),e("div",{staticClass:"card-body"},[e("h2",{staticClass:"card-title text-dark font-weight-bold"},[t._v(t._s(t.favorites.length||0))])])])])],1)]),t._v(" "),e("hr"),t._v(" "),e("h5",[t._v("My recent Orders")]),t._v(" "),e("div",{staticClass:"card-body table-responsive"},[e("table",{staticClass:"text-center table table-bordered table-hover",attrs:{id:"basic-datatable"}},[t._m(2),t._v(" "),e("tbody",t._l(t.orders,(function(r){return e("tr",{key:r._id},[e("td",[e("strong",{staticClass:"text-danger"},[t._v("#"+t._s(r.orderNo||""))])]),t._v(" "),e("td",[t._v(t._s(r.location||""))]),t._v(" "),e("td",[t._v(t._s(r.placedOn||""))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(r.total)))]),t._v(" "),e("td",t._l(r.products,(function(r,n){return e("span",{key:n,staticClass:"badge badge-light p-2 d-inline-block"},[e("b",{staticClass:"text-primary"},[t._v(t._s(r.productQuantity))]),t._v("-"+t._s(t._f("capitalize")(r.productName))+","+t._s(r.productUnit)+"\n                                     ")])})),0),t._v(" "),e("td",[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"wp-".concat(r._id),expression:"`wp-${order._id}`"}],staticClass:"btn btn-primary btn-sm m-1"},[e("i",{staticClass:"fa fa-pencil-alt"}),t._v(" Re-Order\n                ")])]),t._v(" "),e("div",[e("b-modal",{ref:"".concat(r._id),refInFor:!0,attrs:{id:"wp-".concat(r._id),"hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n                    Order No. "),e("code",[t._v(t._s(r.orderNo))])]},proxy:!0}],null,!0)},[t._v(" "),e("div",{staticClass:"d-block"},[e("p",[t._v("Are you sure you want to re-order this drink?")])]),t._v(" "),e("b-button",{staticClass:"mt-3 ml-3",attrs:{variant:"success",small:""},on:{click:function(e){return t.reOrder(r)}}},[t._v("Ok")]),t._v(" "),e("b-button",{staticClass:"mt-3 ml-3",attrs:{variant:"danger",small:""},on:{click:function(e){return t.$bvModal.hide("wp-".concat(r._id))}}},[t._v("\n                    Cancel\n                  ")])],1)],1)])})),0)])])])])])])}),[function(){var t=this._self._c;return t("nav",{attrs:{"aria-label":"breadcrumb"}},[t("ol",{staticClass:"breadcrumb"},[t("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[this._v("Dashboard")])])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header bg-primary"},[t("i",{staticClass:"fas fa-list fa-fw"}),this._v("Total Orders")])},function(){var t=this,e=t._self._c;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",[t._v("Order No.")]),t._v(" "),e("th",[t._v("My Location")]),t._v(" "),e("th",[t._v("Placed On")]),t._v(" "),e("th",[t._v("Total Amount")]),t._v(" "),e("th",[t._v("Products")]),t._v(" "),e("th",[t._v("Action")])])])}],!1,null,null,null);e.default=component.exports}}]);